<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="855px" preserveAspectRatio="none" style="width:867px;height:855px;" version="1.1" viewBox="0 0 867 855" width="867px" zoomAndPan="magnify"><defs><filter height="300%" id="f1qh6lez3r057t" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1qh6lez3r057t)" height="75.9316" style="stroke: #000000; stroke-width: 2.0;" width="263" x="477.5" y="365.2832"/><rect fill="#FFFFFF" filter="url(#f1qh6lez3r057t)" height="253.7949" style="stroke: #000000; stroke-width: 2.0;" width="663" x="193.5" y="455.2148"/><rect fill="#FFFFFF" filter="url(#f1qh6lez3r057t)" height="105.2422" style="stroke: #000000; stroke-width: 2.0;" width="430" x="416.5" y="596.7676"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="32" x2="32" y1="86.4883" y2="768.3203"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="168.5" x2="168.5" y1="86.4883" y2="768.3203"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="236.5" x2="236.5" y1="86.4883" y2="768.3203"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="451.5" x2="451.5" y1="86.4883" y2="768.3203"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="542.5" x2="542.5" y1="86.4883" y2="768.3203"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="707.5" x2="707.5" y1="86.4883" y2="768.3203"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="818.5" x2="818.5" y1="86.4883" y2="768.3203"/><rect fill="#FEFECE" filter="url(#f1qh6lez3r057t)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="44" x="8" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="15" y="71.5352">map</text><rect fill="#FEFECE" filter="url(#f1qh6lez3r057t)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="44" x="8" y="767.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="15" y="787.8555">map</text><rect fill="#FEFECE" filter="url(#f1qh6lez3r057t)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="45" x="144.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="151.5" y="71.5352">style</text><rect fill="#FEFECE" filter="url(#f1qh6lez3r057t)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="45" x="144.5" y="767.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="151.5" y="787.8555">style</text><rect fill="#FEFECE" filter="url(#f1qh6lez3r057t)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="203.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="210.5" y="71.5352">painter</text><rect fill="#FEFECE" filter="url(#f1qh6lez3r057t)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="203.5" y="767.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="210.5" y="787.8555">painter</text><rect fill="#FEFECE" filter="url(#f1qh6lez3r057t)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="47" x="426.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="433.5" y="71.5352">layer</text><rect fill="#FEFECE" filter="url(#f1qh6lez3r057t)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="47" x="426.5" y="767.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="433.5" y="787.8555">layer</text><rect fill="#FEFECE" filter="url(#f1qh6lez3r057t)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="487.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="494.5" y="71.5352">source_cache</text><rect fill="#FEFECE" filter="url(#f1qh6lez3r057t)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="487.5" y="767.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="494.5" y="787.8555">source_cache</text><rect fill="#FEFECE" filter="url(#f1qh6lez3r057t)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="42" x="684.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="691.5" y="71.5352">GPU</text><rect fill="#FEFECE" filter="url(#f1qh6lez3r057t)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="42" x="684.5" y="767.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="691.5" y="787.8555">GPU</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="800.5" y="83.5352">user</text><ellipse cx="818.5" cy="13" fill="#FEFECE" filter="url(#f1qh6lez3r057t)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M818.5,21 L818.5,48 M805.5,29 L831.5,29 M818.5,48 L805.5,63 M818.5,48 L831.5,63 " fill="none" filter="url(#f1qh6lez3r057t)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="800.5" y="780.8555">user</text><ellipse cx="818.5" cy="793.8086" fill="#FEFECE" filter="url(#f1qh6lez3r057t)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M818.5,801.8086 L818.5,828.8086 M805.5,809.8086 L831.5,809.8086 M818.5,828.8086 L805.5,843.8086 M818.5,828.8086 L831.5,843.8086 " fill="none" filter="url(#f1qh6lez3r057t)" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167" x2="157" y1="117.7988" y2="113.7988"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167" x2="157" y1="117.7988" y2="121.7988"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="32" x2="168" y1="117.7988" y2="117.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="39" y="113.0566">update(transform)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="450" x2="440" y1="147.1094" y2="143.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="450" x2="440" y1="147.1094" y2="151.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="169" x2="451" y1="147.1094" y2="147.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="176" y="142.3672">recalculate()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="452" x2="494" y1="207.041" y2="207.041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494" x2="494" y1="207.041" y2="220.041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="453" x2="494" y1="220.041" y2="220.041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="453" x2="463" y1="220.041" y2="216.041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="453" x2="463" y1="220.041" y2="224.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="459" y="171.6777">recompute</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="459" y="186.9883">paint</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="459" y="202.2988">properties</text><polygon fill="#A80036" points="530.5,245.3516,540.5,249.3516,530.5,253.3516,534.5,249.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="32" x2="536.5" y1="249.3516" y2="249.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="39" y="244.6094">update(transform)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="542.5" x2="584.5" y1="278.6621" y2="278.6621"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="584.5" x2="584.5" y1="278.6621" y2="291.6621"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="543.5" x2="584.5" y1="291.6621" y2="291.6621"/><polygon fill="#A80036" points="553.5,287.6621,543.5,291.6621,553.5,295.6621,549.5,291.6621" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="549.5" y="273.9199">fetch new tiles</text><polygon fill="#A80036" points="225,316.9727,235,320.9727,225,324.9727,229,320.9727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="32" x2="231" y1="320.9727" y2="320.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="39" y="316.2305">render(style)</text><polygon fill="#A80036" points="530.5,346.2832,540.5,350.2832,530.5,354.2832,534.5,350.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="237" x2="536.5" y1="350.2832" y2="350.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="244" y="345.541">prepare(context)</text><path d="M477.5,365.2832 L551.5,365.2832 L551.5,372.2832 L541.5,382.2832 L477.5,382.2832 L477.5,365.2832 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.9316" style="stroke: #000000; stroke-width: 2.0;" width="263" x="477.5" y="365.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="492.5" y="378.8516">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="566.5" y="377.918">[for each tile]</text><polygon fill="#A80036" points="695.5,399.9043,705.5,403.9043,695.5,407.9043,699.5,403.9043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="542.5" x2="701.5" y1="403.9043" y2="403.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="549.5" y="399.1621">upload vertices</text><polygon fill="#A80036" points="695.5,429.2148,705.5,433.2148,695.5,437.2148,699.5,433.2148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="542.5" x2="701.5" y1="433.2148" y2="433.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="549.5" y="428.4727">upload image textures</text><path d="M193.5,455.2148 L267.5,455.2148 L267.5,462.2148 L257.5,472.2148 L193.5,472.2148 L193.5,455.2148 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="253.7949" style="stroke: #000000; stroke-width: 2.0;" width="663" x="193.5" y="455.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="208.5" y="468.7832">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="282.5" y="467.8496">[for each layer]</text><polygon fill="#A80036" points="440,489.8359,450,493.8359,440,497.8359,444,493.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="237" x2="446" y1="493.8359" y2="493.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="244" y="489.0938">renderLayer(pass=offscreen)</text><polygon fill="#A80036" points="440,519.1465,450,523.1465,440,527.1465,444,523.1465" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="237" x2="446" y1="523.1465" y2="523.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="244" y="518.4043">renderLayer(pass=opaque)</text><polygon fill="#A80036" points="440,548.457,450,552.457,440,556.457,444,552.457" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="237" x2="446" y1="552.457" y2="552.457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="244" y="547.7148">renderLayer(pass=translucent)</text><polygon fill="#A80036" points="440,577.7676,450,581.7676,440,585.7676,444,581.7676" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="237" x2="446" y1="581.7676" y2="581.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="244" y="577.0254">renderLayer(pass=debug)</text><path d="M416.5,596.7676 L490.5,596.7676 L490.5,603.7676 L480.5,613.7676 L416.5,613.7676 L416.5,596.7676 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="105.2422" style="stroke: #000000; stroke-width: 2.0;" width="430" x="416.5" y="596.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="431.5" y="610.3359">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="177" x="505.5" y="609.4023">[renderLayer() call for each tile]</text><polygon fill="#A80036" points="695.5,631.3887,705.5,635.3887,695.5,639.3887,699.5,635.3887" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="452" x2="701.5" y1="635.3887" y2="635.3887"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="459" y="630.6465">load program</text><polygon fill="#A80036" points="695.5,660.6992,705.5,664.6992,695.5,668.6992,699.5,664.6992" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="452" x2="701.5" y1="664.6992" y2="664.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="459" y="659.957">drawElements()</text><polygon fill="#A80036" points="806.5,690.0098,816.5,694.0098,806.5,698.0098,810.5,694.0098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="707.5" x2="812.5" y1="694.0098" y2="694.0098"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="714.5" y="689.2676">display pixels</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="32" x2="74" y1="737.3203" y2="737.3203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="74" y1="737.3203" y2="750.3203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="33" x2="74" y1="750.3203" y2="750.3203"/><polygon fill="#A80036" points="43,746.3203,33,750.3203,43,754.3203,39,750.3203" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="39" y="732.5781">triggerRepaint()</text><!--
@startuml
participant map
participant style
participant painter
participant layer
participant source_cache
participant GPU
actor user

map->>style: update(transform)
style->>layer: recalculate()
layer->>layer: recompute\npaint\nproperties
map->source_cache: update(transform)
source_cache->source_cache: fetch new tiles
map->painter: render(style)
painter->source_cache: prepare(context)
loop for each tile
source_cache->GPU: upload vertices
source_cache->GPU: upload image textures
end
loop for each layer
painter->layer: renderLayer(pass=offscreen)
painter->layer: renderLayer(pass=opaque)
painter->layer: renderLayer(pass=translucent)
painter->layer: renderLayer(pass=debug)
loop renderLayer() call for each tile
layer->GPU: load program
layer->GPU: drawElements()
GPU->user: display pixels
end
end
map->map: triggerRepaint()
@enduml

PlantUML version 1.2019.06(Fri May 24 13:10:25 EDT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_162-b12
Operating System: Mac OS X
OS Version: 10.15.7
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>